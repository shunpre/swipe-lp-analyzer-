# スワイプLP自動分析ツール - デモ機使い方ガイド

## 📊 デモ機の概要

このデモ機は、スワイプLP自動分析ツールの**完全な機能プロトタイプ**です。

BigQueryの`events_flat_tbl`テーブル構造に対応した**10,000件のリアルなダミーデータ**を使用しており、50項目以上の分析・グラフを実装しています。

---

## 🎯 実装済み機能

### 1. フィルター機能（サイドバー）

- **期間選択**: 過去7日間、過去30日間、過去90日間、カスタム期間
- **LP選択**: 複数のLPから選択可能
- **チャネル選択**: Direct、Organic Social、Referral、Organic Search、Paid Search
- **デバイス選択**: mobile、desktop、tablet
- **A/Bテスト選択**: A、B、control

### 2. 主要指標（KPI）

画面上部に、以下の8つのKPIが常に表示されます。

- セッション数
- コンバージョン数
- コンバージョン率
- クリック数
- クリック率
- 平均到達ページ数
- 平均滞在時間
- FV残存率
- 最終CTA到達率
- 平均読込時間

### 3. タブ1: 📊 全体分析

**グラフ選択機能:**
- セッション数の推移
- コンバージョン率の推移
- デバイス別分析
- チャネル別分析
- LP進行ファネル
- 時間帯別CVR
- 曜日別CVR
- UTM分析
- 読込時間分析

**使い方:**
1. 表示したいグラフをチェックボックスで選択
2. 選択したグラフが即座に表示されます

### 4. タブ2: 📄 ページ分析

**機能:**
- ページ別パフォーマンス一覧（画像付き）
- 各ページの詳細メトリクス
  - ビュー数
  - 平均滞在時間
  - 離脱率
  - 平均スクロール率
  - 平均読込時間
- 滞在時間が短いページ TOP5
- 離脱率が高いページ TOP5
- 逆行パターン（戻る動作）

**使い方:**
1. ページ一覧で、各ページのエクスパンダーをクリック
2. ページ画像と詳細メトリクスが表示されます
3. 画像は現在プレースホルダーですが、本番環境では実際のLP画像が表示されます

### 5. タブ3: 👥 セグメント分析

**分析可能なセグメント:**
- デバイス別
- チャネル別
- UTMソース別
- A/Bテスト別

**表示される指標:**
- セッション数
- コンバージョン数
- コンバージョン率
- エンゲージメント率（滞在時間30秒以上）
- 平均滞在時間
- 平均到達ページ数

**使い方:**
1. セグメントタイプを選択
2. テーブルとグラフが自動的に更新されます

### 6. タブ4: 🧪 A/Bテスト分析

**機能:**
- A/Bテストマトリクス
- A/BテストCVR比較
- A/Bテスト CVR 時系列推移

**表示される指標:**
- セッション数
- コンバージョン率
- FV残存率
- 最終CTA到達率
- 平均到達ページ数
- 平均滞在時間

### 7. タブ5: 🎬 動画・スクロール分析

**機能:**
- ページ別平均スクロール率
- 動画視聴率
- 動画視聴とコンバージョンの関係
- スクロール率別コンバージョン率

### 8. タブ6: 📈 時系列分析

**機能:**
- 日別推移（選択可能な指標）
  - セッション数
  - コンバージョン数
  - コンバージョン率
  - FV残存率
  - 最終CTA到達率
  - 平均到達ページ数
  - 平均滞在時間
- 月間推移（データが60日以上ある場合）

### 9. タブ7: 💡 AI提案（プロトタイプ）

**質問ボタン:**
- ❓ このLPの最大のボトルネックは？
- ❓ コンバージョン率を改善するには？
- ❓ A/Bテストの結果、どちらが優れている？
- ❓ デバイス別のパフォーマンス差は？

**フリーチャット:**
- 質問を入力すると、プロトタイプ版の回答が表示されます
- 本番環境では、Gemini 2.5 Proが実際のデータに基づいて詳細な分析と提案を行います

### 10. 🎯 カスタムオーディエンスビルダー

**機能:**
- 条件を指定して、独自のオーディエンスを即座に作成
- 作成したオーディエンスの詳細メトリクスと時系列推移を表示

**設定可能な条件:**
- 最小滞在時間（秒）
- 最小スクロール率
- 最小到達ページ数
- コンバージョン達成のみ
- デバイス
- チャネル

**使い方:**
1. 画面下部の「カスタムオーディエンスを作成」エクスパンダーをクリック
2. 条件を設定
3. 「オーディエンスを作成」ボタンをクリック
4. 該当するセッション数、ユーザー数、コンバージョン率などが即座に表示されます

---

## 🔍 デモ機の使い方

### 基本的な使い方

1. **フィルターを設定**
   - サイドバーで期間、LP、チャネル、デバイス、A/Bテストを選択

2. **KPIを確認**
   - 画面上部のKPIで、全体的なパフォーマンスを把握

3. **タブを切り替えて詳細分析**
   - 各タブで、異なる視点からデータを分析

4. **グラフを選択**
   - 全体分析タブで、表示したいグラフをチェックボックスで選択

5. **ページ分析で画像を確認**
   - ページ分析タブで、各ページのコンテンツ画像と詳細メトリクスを確認

6. **AI提案を活用**
   - AI提案タブで、質問ボタンをクリックして改善提案を取得

7. **カスタムオーディエンスを作成**
   - 独自の条件でオーディエンスを作成し、詳細分析

### 実際の使用例

#### 例1: コンバージョン率が低い原因を特定

1. **全体分析タブ**で、コンバージョン率の推移を確認
2. **ページ分析タブ**で、離脱率が高いページを特定
3. **AI提案タブ**で、「このLPの最大のボトルネックは？」をクリック
4. 提案されたアクションを実行

#### 例2: デバイス別のパフォーマンスを比較

1. **セグメント分析タブ**で、「デバイス別」を選択
2. デバイス別のコンバージョン率を確認
3. **AI提案タブ**で、「デバイス別のパフォーマンス差は？」をクリック
4. 提案されたアクションを実行

#### 例3: A/Bテストの結果を評価

1. **A/Bテスト分析タブ**で、A/Bテストマトリクスを確認
2. CVR比較グラフで、どちらのバリアントが優れているかを確認
3. **AI提案タブ**で、「A/Bテストの結果、どちらが優れている？」をクリック
4. 提案されたアクションを実行

#### 例4: 高エンゲージメントユーザーを分析

1. **カスタムオーディエンスビルダー**で、以下の条件を設定
   - 最小滞在時間: 60秒
   - 最小スクロール率: 0.7
   - 最小到達ページ数: 5
2. 「オーディエンスを作成」をクリック
3. 該当するユーザーの特徴を確認
4. 時系列推移で、トレンドを把握

---

## 📝 デモ機の制限事項

このデモ機は、プロトタイプであるため、以下の制限があります。

### 1. ダミーデータ

- 実際のBigQueryデータではなく、ダミーデータを使用しています
- データは10,000イベント、666ユーザー、過去30日間です

### 2. ページ画像

- ページ画像はプレースホルダーです
- 本番環境では、実際のLP画像が表示されます

### 3. AI提案

- AI提案は固定テキストです
- 本番環境では、Gemini 2.5 Proが実際のデータに基づいて詳細な分析と提案を行います

### 4. フリーチャット

- フリーチャットは固定回答です
- 本番環境では、Gemini 2.5 Proが質問に対して動的に回答します

---

## 🚀 本番環境への移行

デモ機をご確認いただき、ご納得いただけましたら、以下の情報をご提供ください。

### 必要な情報

1. **GCPプロジェクト情報**
   - GCPプロジェクトID
   - サービスアカウント認証情報（JSON）

2. **BigQuery情報**
   - データセット名
   - テーブル名（`events_flat_tbl`）
   - テーブルのカラム名一覧

3. **Gemini API情報**
   - Gemini APIキー
   - 使用するモデル（Gemini 2.5 Pro）

4. **LP画像URL取得方法**
   - LP URLからページ画像URLを取得する方法
   - または、画像URLのリスト

### 本番環境での追加機能

1. **実際のBigQueryデータ取得**
2. **LP画像の自動取得と表示**
3. **Gemini 2.5 Proによる動的なAI分析・提案**
4. **SQL提案機能**
5. **アラート機能**
6. **環境変数ベースの設定管理**
7. **セットアップガイド**

---

## 📞 お問い合わせ

デモ機についてご質問やフィードバックがありましたら、お気軽にお聞かせください。

---

**スワイプLP自動分析ツール** - Powered by Streamlit & Gemini 2.5 Pro

